<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <title>Single Page Navigation</title>

        <style>
            * {
                padding: 0;
                margin: 0;
                box-sizing: border-box;
            }

            body {
                font-family: system-ui, -apple-system, BlinkMacSystemFont,
                    "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
                    "Helvetica Neue", sans-serif;
            }

            main {
                margin: 20px 50px 0;
            }

            ul {
                list-style: none;
            }

            .header {
                background: #e6f0ff;
                padding: 12px 0;
            }

            .page-list {
                display: flex;
                column-gap: 20px;
                justify-content: center;
            }

            .page-item {
                cursor: pointer;
                text-decoration: none;
                padding: 8px 4px;
                font-size: 18px;
                font-weight: 600;
                color: #333;
            }

            .page-item:hover {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <header class="header">
            <div class="container">
                <ul class="page-list">
                    <li id="home-page" class="page-item">Home</li>
                    <li id="about-page" class="page-item">About</li>
                    <li id="services-page" class="page-item">Services</li>
                    <li id="contact-page" class="page-item">Contact</li>
                </ul>
            </div>
        </header>

        <main>
            <div id="content" class="content"></div>
            <p class="history-length"></p>
        </main>

        <script>
            const $ = document.querySelector.bind(document);

            const homePage = $("#home-page");
            const aboutPage = $("#about-page");
            const servicesPage = $("#services-page");
            const contactPage = $("#contact-page");
            const content = $("#content");
            const historyLengthElement = $(".history-length");

            const contents = {
                home: "Chào mừng đến với trang chủ! Đây là nội dung của trang Home.",
                about: "Thông tin về chúng tôi. Chúng tôi là công ty chuyên về công nghệ web.",
                services:
                    "Các dịch vụ của chúng tôi: Thiết kế web, Lập trình ứng dụng, Tư vấn công nghệ.",
                contact:
                    "Liên hệ với chúng tôi: Email: contact@example.com, Phone: 0123456789",
            };

            const pageNames = Object.keys(contents); // ['home', 'about', 'services', 'contact']

            function loadContent(pageName) {
                content.textContent = contents[pageName] ?? "Hello!";
                historyLengthElement.textContent = `History Length: ${window.history.length}`;
            }

            function handleReload() {
                const params = new URLSearchParams(location.search);
                const pageName = params.get("page");

                loadContent(pageName);
            }

            // add event listener for each pageItem
            pageNames.forEach((pageName) => {
                const pageElement = $(`#${pageName}-page`);

                pageElement.addEventListener("click", () => {
                    history.pushState(
                        { page: pageName },
                        null,
                        `?page=${pageName}`
                    );
                    loadContent(pageName);
                });
            });

            // lắng nghe khi user click back/forward
            window.addEventListener("popstate", () => {
                handleReload();
            });

            // khi mới vào trang hoặc nhấn F5
            handleReload();
        </script>
    </body>
</html>
